---
title: "Machine Learning in R:<br/>Workshop Series"
subtitle: "Git and Github"
author: "Marius Puchalla"
institute: "*Institute of Public Economics II *"
date: "2020-08-20 (updated: `r Sys.Date()`)"

output:
  xaringan::moon_reader:
    css: [./custom/xaringan-themer.css, ./custom/custom-theme.css]
    lib_dir: libs
    nature:
      titleSlideClass: [left, middle, inverse]
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: '16:9'
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  #set comment formatting
  comment = ">",
  #collapse code and output
  collapse = F
)
```

```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
style_mono_accent(
  base_color = "#000000",
  link_color = "#0000EE",
  header_font_google = google_font("Josefin Sans"),
  text_font_google   = google_font("Montserrat", "700b", "400"),
  code_font_google   = google_font("Fira Mono"),
  colors = c(
    red = "#f34213",
    white = "#FFFFFF"
  ),
  code_font_size = "smaller",
  code_inline_background_color = "#F4F4F4",
  outfile = "./custom/xaringan-themer.css"
)
```

```{r packages, warning=F, message=F, echo=F}
#install.packages("pacman")
if (!require("pacman")) install.packages("pacman")
pacman::p_load(showtext, renv)
pacman::p_load_gh("hadley/emo", "gadenbuie/countdown")
pacman::p_load(tibble)
```

name: agenda

##Agenda

**1. What is Git? What is Github?**
  1. What is Git?
  2. What is Github?
  3. Branching, forking, cloning, pull request, push request and merging.
  4. Why are Git and GitHub great tools for collaboration?

**2. How do I set up Git and Github?**

**3. How do I use it with RStudio?**

**4. Practical application of how to work together**

**5. Further examples of how to use Github**
  1. Using other repositories.  
  2. Other use case for GitHub.
 
**6. Summary of the discussed**

  

???
comment

---

class: middle, center, inverse

#1 What is Git? What is Github?

---

background-image: url(https://cdn.fileinfo.com/img/icons/files/128/rproj-10013.png)
background-position: 95% 5%
background-size: 7.5%
layout: true

---
##1. What is Git? What is Github?
###1. What is Git?

- Git is a "Distributed Version Control System" (DVCS) which is used for version control
- What does this mean exactly?
  - When you upload files, Git portrays the data as a series of snapshots of a miniature filesystem.
  - A "software repository", or "repo" is a storage location for software packages.
  - The DVCS fully mirrors the repository, including its full history.
  - Allows you to revert selected files to a previous state.
  - This way, there will always be a version of the file on a pc.
```{r, echo=F, out.height='65%', out.width='70%', fig.align='center'}
knitr::include_graphics("./Bilder/VersionControl.PNG")
```  
  
---

##1. What is Git? What is Github?
###1. What is Git?

- Git has three main states that your files can reside:
  -__Modified__: means that you have changed the file but have not committed it to your database yet.
  -__Staged__: means that you have marked a modified file in its current version to go into your next commit snapshot.
  -__Committed__: means that the data is safely stored in your local database.
  
```{r, echo=F, out.height='75%', out.width='70%', fig.align='center'}
knitr::include_graphics("./Bilder/GitStates.PNG")
```  
  
---

##1. What is Git? What is Github?
###1. What is Git?

Git workflow:
  1. You __modify__ files in your working tree.
  2. You selectively __stage__ just those changes you want to be part of your next commit, which adds ONLY those changes to the staging area.
  3. You do a __commit__, which takes the files as they are in the stating area and stores that snapshot permanently to your Git directory.

If a particular version of a file is in the Git directory, its considered __COMMITED__. 

If it has been modified and was added to the staging area, it is __STAGED__. 

And if it was changed since it was checked out but has not been staged, it is __MODIFIED__. 

---


##1. What is Git? What is Github?
###2. What is Gitub?

Github is the single largest __host__ for __Git repositories__ (repos), and is the central point of collaboration for millions of projects.  You don't need a local server that hosts your git repos.

 -Github is a source platform used by developers to store project files, old versions and to fork into new versions.

 -Github enables collaboration between different people across the world.

 -It is open-source: You can benefit from improvements of your code by the public if you __wish__ to do so. You can also work on __private__ repos.


???
comment

---


##1. What is Git? What is Github?
###2. What is Gitub?

**Basics:** 

-The fundamental object in GitHub is a __repository__ (or "repo") - this is the master directory for a project. This unfolds in a folder structure similar to the one on your PC/Mac.

-GitHub stores the history of changes as a sequence of changes to text, called __commits__ with the following features:
  - An ID for the commit
  - Content (i.e. a before and after state)
  - Metadata (author, timestamp, commit message, etc.)
  
Note: It's crucial to remember that what is stored in a commit is only the __actual changes__ you make to text.
This is a key reason why git can store long and complicated histories without consuming massive amounts of memory.








???
comment


---

##1. What is Git? What is Github?
###3. Branching, forking, cloning, pull request, push request and merging

**Basic terminology for GitHub:**


-__Branching__ means you diverge from the main line of development but it remains part of the original repository. You can continue to work without messing up the original code. The code that is branched and the branch know and rely on each other. 

-__Forking__ a project creates an __independent copy__ of that project at that specific time and saves it to your GitHub account. This allows you to experiment freely without affecting the original project. The fork remains, even if the fork origin is deleted. If you fork a repo, you get that repo and all of its consecutive branches.


???
comment

---

##1. What is Git? What is Github?
###3. Branching, forking, cloning, pull request, push request and merging

**Basic terminology for GitHub:**


-__Cloning__ a project can be done on a repo or any of its branches or forks and it creates a "local clone" of the remote GitHub repo.
When you want to work on a project by updating its files or adding new files you should choose this option.

-__Push requests__ are sent to GitHub and your code is sent to the designated repo, depending on your authorization status. 

-__Pull requests__ let other people know about changes that you pushed to a branch in a repository on GitHub. The repo owner can review your contribution and __merge__ it into the base branch.

-__Merging__ allows for the combination of the old code with your contribution to the project. It can be done by everyone who is allowed to do so in the repo.



---

##1. What is Git? What is Github?
###3. Branching, forking, cloning, pull request, push request and merging




GitHub workflow for the case that you are __NOT__ an official collaborator on a repo:

 1. __Fork__ a project that you like. The project is copied to your repo.
 
 2. __Clone__ your repo to your local PC/Mac and start working on additions to that repo (e.g. new branch and changes).
 
 3. __Push__ it back to your repo.
 
 4. Submit a __pull request__ to the admin of the central repo. 
 
 5. The repo owner can now decide to __merge__ your __pull request__ with the old code and the old code is updated.

???
comment

---

##1. What is Git? What is Github?
###3. Branching, forking, cloning, pull request, push request and merging

**What to choose for a project?**

__Forking__ works well in situations where the repository admin:
- does not want to manage user access
- wants complete control over merging
- wants to support independent branches
- discard of experiments and changes easily

__Branching__ works well when:
- you have a small group of programmers who trust each other
- you are willing to give the programmers access to a repository.
- you have rapid iteration cycle of your "product".


-[Very good overview over Git and GitHub](https://happygitwithr.com/index.html)


???
comment


---


##1. What is Git? What is Github?

###4. Why are Git and GitHub great tools for collaboration?
As mentioned before, it is a "Distributed Version Control System"

```{r, echo=F, out.height='75%', out.width='70%', fig.align='center'}
knitr::include_graphics("./Bilder/VersionControl.PNG")
```
---

##1. What is Git? What is Github?

###4. Why are Git and GitHub great tools for collaboration?


When you work on a project you can see:
- What was changed?
- When was something changed?
- Who changed it?

When you work on a project with someone:
- You work on the same code basis or version as your team member.
- You can work on the same file at the same time and both commit it to the main repo.
- If you or your team member makes a mistake in the file you can use the rollback function to get back to a "working" state (version control).


This allows you to set up several types of workflows that aren't possible in centralized systems.

???
comment



---
class: middle, center, inverse

#2 How do I set up Git and Github?

---

background-image: url(https://cdn.fileinfo.com/img/icons/files/128/rproj-10013.png)
background-position: 95% 5%
background-size: 7.5%
layout: true

---


##2. How do I set up Git and Github?

How do I use Github and what has to be done in order to do so?

Steps that you have to take:

-[Install Git](https://git-scm.com/)
```{r, echo=F, out.height='40%', out.width='40%', fig.align='center'}
knitr::include_graphics("./Bilder/GitPage.PNG")
```

-[Get an Github Account](https://github.com/)
```{r, echo=F, out.height='50%', out.width='50%', fig.align='center'}
knitr::include_graphics("./Bilder/GitHubPage.PNG")
```

<br><br><br>


###Lets see that in action!


???
comment

---

##2. How do I set up Git and Github?

#Live Demonstration




???
comment

---

class: middle, center, inverse

#3 How do I use Github with RStudio?

---

background-image: url(https://cdn.fileinfo.com/img/icons/files/128/rproj-10013.png)
background-position: 95% 5%
background-size: 7.5%
layout: true

---


##3. How do I use Github with RStudio?


Necessary steps:

- [Install R](https://cran.r-project.org/bin/windows/base/)
- [Install RStudio](https://rstudio.com/products/rstudio/download/) 
- [Connect RStudio with GitHub introduction](https://www.geo.uzh.ch/microsite/reproducible_research/post/rr-rstudio-git/)

Check that "Version Control" is activated (Tools -> Global Options -> Git/SVN)

The path for the Git executable should already be inserted if you follow these steps. If the path is missing, open a shell (press the Windowsbutton on your keyboard -> type in "cmd" -> type in "where git" -> You get the path of the programme)

```{r, echo=F, out.height='65%', out.width='70%', fig.align='center'}
knitr::include_graphics("./Bilder/GitinR.PNG")
```  


---


##3. How do I use Github with RStudio?


- Create a repository on GitHub that you want to work on.

You can either do that on the starting page by clicking "New"

```{r, echo=F, out.height='65%', out.width='70%', fig.align='center'}
knitr::include_graphics("./Bilder/NewRepo.PNG")
```  

You can also always create new repos by going on the upper right and press on the plus button

```{r, echo=F, out.height='65%', out.width='40%', fig.align='center'}
knitr::include_graphics("./Bilder/NewRepo0.PNG")
```  



???
comment

---


##3. How do I use Github with RStudio?


- Create a repository on GitHub that you want to work on.


- E.g. create a repo with the name "Problemset 1"

```{r, echo=F, out.height='65%', out.width='70%', fig.align='center'}
knitr::include_graphics("./Bilder/NewRepo2.PNG")
```  



???
comment

---

##3. How do I use Github with RStudio?

## Lets see that in action!
#Live Demonstration

???
comment

---


class: middle, center, inverse

#4 Practical application of how to work together


---

background-image: url(https://cdn.fileinfo.com/img/icons/files/128/rproj-10013.png)
background-position: 95% 5%
background-size: 7.5%
layout: true

---

##4. Practical application of how to work together

How would you begin to work together?

One member of the group creates a new repo. This group member invites the remaining group members to work on it, allowing for __branching__ in the main repo.
 
Go to settings -> manage access-> invite collaborator-> Enter Email of the groups GitHub Accounts.


Once your team is added as collaborators they will be able to push, merge and clone the repo without permission from others.
```{r, echo=F, out.height='65%', out.width='70%', fig.align='center'}
knitr::include_graphics("./Bilder/Workflow0.png")
```  





---

##4. Practical application of how to work together

As a collaborator you want to create a clone of the repo on your local harddrive. You can do that by visiting the repo on GitHub and copy the correct URL of the repo. You find it under the green __Code__ Button.

```{r, echo=F, out.height='65%', out.width='60%', fig.align='center'}
knitr::include_graphics("./Bilder/Code.png")
```  

Now that you have the correct link you can open RStudio.


???
comment

---

##4. Practical application of how to work together

You have opened RStudio and want to create a "New Project":
```{r, echo=F, out.height='30%', out.width='30%', fig.align='center'}
knitr::include_graphics("./Bilder/NewProject.png")
```  

You want to pick a project that is based on a "Version Control" system.
---

##4. Practical application of how to work together


You may now choose to use Git as your "Distributed Version Control System":

```{r, echo=F, out.height='30%', out.width='30%', fig.align='center'}
knitr::include_graphics("./Bilder/NewProject1.png")
```  

You can also choose "Subversion" here as an alternative to Git, but we will not deal with this here.

---

##4. Practical application of how to work together


Now paste in the copied URL of the repo that you want to work on:

```{r, echo=F, out.height='30%', out.width='30%', fig.align='center'}
knitr::include_graphics("./Bilder/NewProject2.png")
```  

You also need to specify where you want RStudio to save the __Clone__ of the repo and the changes that you make locally.

We recommend to tick the box to "open the project in a new session". This way you can work on several projects/files at the same time. 


---

##4. Practical application of how to work together

You have now successfully made a local copy of the repo. You may find the files that are in the repo in the box on the right. 

```{r, echo=F, out.height='80%', out.width='80%', fig.align='center'}
knitr::include_graphics("./Bilder/NewProject3.png")
``` 

---

##4. Practical application of how to work together

On the previous slide you can see that the file "Exercise 1" is already created. We can now commit any changes to that file to the repo.

```{r, echo=F, out.height='80%', out.width='80%', fig.align='center'}
knitr::include_graphics("./Bilder/NewProject4.png")
``` 

On the right hand side you can see the "Commit" button after we saved the changes to our local "Exercise 1" file.
Now you want to merge all the files that you worked on with the repo on GitHub.

---

##4. Practical application of how to work together

Here we opened the "Commit" Button and the "Commit Windows" opens up. 

```{r, echo=F, out.height='80%', out.width='80%', fig.align='center'}
knitr::include_graphics("./Bilder/NewProject5.png")
``` 

Here you can see  the changes that have been made to the previous version in the red box below. On the right hand side you can see that we have to give the change a "Commit message" describing what we have done. After selecting "Exercise 1" on the left hand side by ticking the box we can press "Commit". 

---

##4. Practical application of how to work together

The changes appear directly in the original repo.

```{r, echo=F, out.height='80%', out.width='80%', fig.align='center'}
knitr::include_graphics("./Bilder/NewProject7.png")
``` 

---

##4. Practical application of how to work together

You can also see all the changes made for this file by pressing the "History" button.

```{r, echo=F, out.height='80%', out.width='80%', fig.align='center'}
knitr::include_graphics("./Bilder/NewProject6.png")
``` 




---

##4. Practical application of how to work together


First, determine who is going to be in charge of handling merging. The less people acting independently on merging the better so for a team of 4 it would probably help you to have one official "Reviewer" or "Merge Master".

Issues when collaborating: When you have collaborators working on the same lines within the same file. This can cause problems with merging.  

The Master Branch should always be deployable. The way to keep the Master deployable is to create new branches for new features and merge them into Master when they are completed.

Avoid working in the same files at the same time. Think in features. Four you specifically, work on different parts of the problem sets because the chances that you are working on the same files and are writing overlapping code are very high.

???
comment



---

##4. Practical application of how to work together


## Lets see that in action!
#VIDEO

???
comment

---

##4. Practical application of how to work together

Summary of working together:
- You can work in the same repo together.
- You can either create new files or work on the same files at the same time.
- If you work on the same file together, make sure to not work on the same lines at the same time.


???
comment

---





class: middle, center, inverse

#5 Further examples of how to use Github

---

background-image: url(https://cdn.fileinfo.com/img/icons/files/128/rproj-10013.png)
background-position: 95% 5%
background-size: 7.5%
layout: true

---

##5. Further examples of how to use Github

###1. Using other repositories 



Imagine you want to know what happens in the corona warning app used in Germany:

[GitHub repo for the app](https://github.com/corona-warn-app)

```{r, echo=F, out.height='65%', out.width='70%', fig.align='center'}
knitr::include_graphics("./Bilder/Corona.PNG")
```  



---

##5. Further examples of how to use Github

###1. Using other repositories 



You have seen a new method that has not been implemented in R:

[CausalTree](https://github.com/susanathey/causalTree)

```{r, echo=F, out.height='65%', out.width='70%', fig.align='center'}
knitr::include_graphics("./Bilder/SusanGitHub.PNG")
```  



---

##5. Further examples of how to use Github

###2. Other use cases for GitHub 

As done here you can use GitHub to host content:

 - host content like presentations
 - host your own webpage


???
comment

---

class: middle, center, inverse

#6 Summary of the discussed

---

background-image: url(https://cdn.fileinfo.com/img/icons/files/128/rproj-10013.png)
background-position: 95% 5%
background-size: 7.5%
layout: true

---


##6. Summary of the discussed

-Git and GitHub are helpful for the collaboration with other people on different kinds of projects.

-You can use version control collectively to roll back to previous states of the project.

-RStudio can directly communicate with GitHub and enable almost seemless workflow.

[Further material that can help you with R, GitHub and Datascience in general.](https://ohi-science.org/data-science-training/)
???
comment















